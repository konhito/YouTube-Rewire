<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>YT Recommendation Booster</title>
    <style>
      :root {
        --bg: rgba(255, 255, 255, 0.06);
        --border: rgba(255, 255, 255, 0.08);
        --glass-shadow: rgba(15, 23, 42, 0.6);
        --accent: linear-gradient(135deg, #5ee7df, #b490ca);
        --muted: rgba(255, 255, 255, 0.7);
      }
      html,
      body {
        height: 100%;
        margin: 0;
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
        width: 360px;
        padding: 12px;
        color: #e2e8f0;
      }
      .container {
        background: rgba(30, 41, 59, 0.45);
        border: 1px solid rgba(148, 163, 184, 0.15);
        backdrop-filter: blur(16px) saturate(180%);
        -webkit-backdrop-filter: blur(16px) saturate(180%);
        border-radius: 16px;
        padding: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.37);
      }
      .header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 8px;
      }
      .logo {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        background: var(--accent);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        color: #052;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.35);
      }
      .title .name {
        font-weight: 700;
        color: #f1f5f9;
        font-size: 15px;
      }
      .title .subtitle {
        font-size: 12px;
        color: #cbd5e1;
      }
      label {
        display: block;
        font-size: 12px;
        font-weight: 600;
        color: #cbd5e1;
        margin-bottom: 6px;
        margin-top: 8px;
      }
      input,
      textarea {
        width: 100%;
        box-sizing: border-box;
        border-radius: 8px;
        border: 1px solid rgba(148, 163, 184, 0.2);
        background: rgba(15, 23, 42, 0.4);
        color: #f1f5f9;
        padding: 9px 12px;
        font-size: 13px;
        font-family: inherit;
        outline: none;
        transition: border-color 0.2s ease, background 0.2s ease;
      }
      input:focus,
      textarea:focus {
        border-color: rgba(94, 231, 223, 0.5);
        background: rgba(15, 23, 42, 0.6);
      }
      input::placeholder,
      textarea::placeholder {
        color: rgba(203, 213, 225, 0.5);
      }
      textarea {
        height: 70px;
        resize: vertical;
        font-size: 13px;
      }
      .actions {
        margin-top: 8px;
        display: flex;
        gap: 8px;
        align-items: center;
      }
      .btn {
        border-radius: 8px;
        padding: 9px 14px;
        border: 1px solid rgba(148, 163, 184, 0.2);
        background: linear-gradient(
          180deg,
          rgba(71, 85, 105, 0.4),
          rgba(51, 65, 85, 0.6)
        );
        color: #f1f5f9;
        cursor: pointer;
        font-size: 13px;
        font-weight: 500;
        font-family: inherit;
        transition: transform 0.18s ease, box-shadow 0.18s ease,
          background 0.18s ease;
      }
      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        background: linear-gradient(
          180deg,
          rgba(71, 85, 105, 0.5),
          rgba(51, 65, 85, 0.7)
        );
      }
      .btn.primary {
        background: linear-gradient(135deg, #5ee7df, #b490ca);
        color: #0f172a;
        font-weight: 700;
        border-color: transparent;
      }
      .btn.primary:hover {
        background: linear-gradient(135deg, #6ef0e7, #c5a0da);
      }
      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }
      .btn {
        transition: transform 0.18s ease, box-shadow 0.18s ease;
      }
      .spinner {
        width: 14px;
        height: 14px;
        border-radius: 50%;
        border: 2px solid rgba(241, 245, 249, 0.3);
        border-top-color: #f1f5f9;
        animation: spin 1s linear infinite;
        display: inline-block;
        vertical-align: middle;
        margin-left: 6px;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      .toast {
        position: fixed;
        left: 50%;
        transform: translateX(-50%);
        bottom: 16px;
        background: linear-gradient(
          180deg,
          rgba(51, 65, 85, 0.95),
          rgba(30, 41, 59, 0.95)
        );
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        padding: 10px 16px;
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.2);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.25s ease, transform 0.25s ease;
        color: #f1f5f9;
        font-size: 13px;
      }
      .toast.show {
        opacity: 1;
        pointer-events: auto;
        transform: translate(-50%, -6px);
      }
      .toast.success {
        background: linear-gradient(
          180deg,
          rgba(46, 204, 113, 0.25),
          rgba(39, 174, 96, 0.2)
        );
        border-color: rgba(46, 204, 113, 0.3);
        color: #d1fae5;
      }
      .toast.error {
        background: linear-gradient(
          180deg,
          rgba(239, 68, 68, 0.25),
          rgba(220, 38, 38, 0.2)
        );
        border-color: rgba(239, 68, 68, 0.3);
        color: #fee2e2;
      }
      .status {
        margin-top: 10px;
        font-size: 13px;
        color: #e2e8f0;
        font-weight: 500;
      }
      .meta {
        font-size: 11px;
        color: #94a3b8;
        margin-top: 6px;
      }
      .tip {
        font-size: 11px;
        color: #94a3b8;
        margin-top: 8px;
        font-style: italic;
      }
      .logs {
        margin-top: 10px;
        font-size: 12px;
        max-height: 150px;
        overflow: auto;
        background: rgba(15, 23, 42, 0.4);
        padding: 8px;
        border-radius: 8px;
        border: 1px solid rgba(148, 163, 184, 0.15);
      }
      .log-item {
        padding: 6px;
        border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        color: #cbd5e1;
      }
      .log-item:last-child {
        border-bottom: none;
      }
      h4 {
        color: #cbd5e1;
        font-size: 13px;
        margin-top: 12px;
        margin-bottom: 6px;
      }
      #keyHint {
        font-size: 11px;
        color: #94a3b8;
        margin-bottom: 6px;
        font-style: italic;
      }
      .fade-in {
        animation: appear 0.35s ease;
      }
      @keyframes appear {
        from {
          opacity: 0;
          transform: translateY(6px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="logo" aria-hidden="true">⇧</div>
        <div class="title">
          <div class="name">YT Recommendation Booster</div>
          <div class="subtitle">7-day personalized watch boost</div>
        </div>
      </div>

      <label>Topic (tell us a short topic, e.g., "roblox game backend"):</label>
      <div
        style="display: flex; gap: 8px; align-items: center; margin-bottom: 8px"
      >
        <input
          id="topic"
          placeholder="e.g., roblox game backend"
          style="
            flex: 1;
            padding: 8px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.04);
            background: transparent;
            color: #fff;
          "
        />
        <button id="generateBtn" class="btn">Generate</button>
      </div>

      <label>Gemini API Key (optional)</label>
      <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px;">
        <input id="apiKey" type="password" aria-label="Gemini API Key" placeholder="Paste Gemini API key (kept local)" style="flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff" />
        <button id="showKeyBtn" class="btn" title="Show/Hide key">Show</button>
        <button id="saveKeyBtn" class="btn" title="Save key">Save</button>
        <button id="clearKeyBtn" class="btn" title="Clear key">Clear</button>
      </div>
      <div id="keyHint" style="font-size:11px;color:rgba(255,255,255,0.56);margin-bottom:6px">Key is stored locally. The extension will only send it to the API endpoint when generating keywords.</div>

      <label>Keywords (comma-separated):</label>
      <textarea id="keywords" placeholder="e.g., cooking recipes, travel vlogs, Python programming"></textarea>

      <div class="actions">
        <button id="startBtn" class="btn primary">Start 7-Day Boost</button>
        <button id="stopBtn" class="btn">Stop Early</button>
        <button id="clearLogsBtn" class="btn" title="Clear recent logs">
          Clear Logs
        </button>
      </div>

      <div class="status" id="status">Status: idle</div>
      <div class="meta">
        Sessions: randomized 3–5/day • Max watch 15 min • Ethical simulation
      </div>
      <div class="tip">
        Tip: Use your real interests. Test on a dev account first for safety.
      </div>
      <h4 style="margin-top: 10px">Recent activity</h4>
      <div class="logs" id="logs">No logs yet.</div>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <script src="popup.js"></script>
  </body>
</html>
